<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>ЭкоНива · Калькулятор сделки</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
:root{--green:#009639;--greenD:#0b6e2b;--bg:#f5f8f5;--ink:#1f2937;--muted:#6b7280;--line:#e5e7eb;--edit:#fff6bf;--card:#fff}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--ink);font:14px/1.45 Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
.header{background:linear-gradient(90deg,var(--green),#0ea76a);color:#fff;padding:16px 18px;display:flex;gap:12px;align-items:center;justify-content:space-between}
.header h1{font-size:18px;margin:0}
.header .buttons{display:flex;gap:8px}
.container{max-width:1200px;margin:18px auto;padding:0 16px}
.grid{display:grid;grid-template-columns:1.2fr .8fr;gap:16px}
.block{background:var(--card);border:1px solid var(--line);border-radius:12px;box-shadow:0 1px 4px rgba(0,0,0,.04)}
.block .head{padding:10px 14px;border-bottom:1px solid var(--line);display:flex;gap:10px;justify-content:space-between;align-items:center}
.block .head h2{margin:0;font-size:15px}
.block .body{padding:12px 14px}
.table-wrap{overflow:auto;max-height:360px;border:1px solid var(--line);border-radius:10px}
table{width:100%;border-collapse:collapse;table-layout:auto}
th,td{border:1px solid var(--line);padding:8px 10px;vertical-align:middle}
th{background:#f9fafb;text-align:center;font-weight:700}
td.label{background:#fbfffb;font-weight:600;white-space:nowrap}
input.cell{width:100%;padding:7px 9px;border:1px solid #cbd5e1;border-radius:8px;background:var(--edit);text-align:right;font:inherit}
input.cell.text{text-align:left}
input.cell[type=number]{step:0.01}
.kpis{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.kpi{background:#f7fff9;border:1px solid #d9f2e2;border-radius:10px;padding:10px 12px}
.kpi.full-width{grid-column:1 / span 2}
.kpi .name{font-size:12px;color:var(--muted)}
.kpi .val{font-size:20px;font-weight:800;color:var(--greenD);word-break:break-all}
.details .table-wrap{max-height:520px}
.sum-row td{background:#f2fff5;font-weight:800}
@media (max-width:980px){.grid{grid-template-columns:1fr}.kpis{grid-template-columns:1fr}.kpi.full-width{grid-column:1}}
</style>
</head>
<body>
  <div class="header">
    <h1>ЭкоНива · Калькулятор импортной сделки</h1>
    <div class="buttons">
      <button onclick="exportToPDF()">Экспорт в PDF</button>
      <button onclick="resetDefaults()">Сбросить</button>
    </div>
  </div>

  <div class="container">
    <div class="grid">
      <section class="block">
        <div class="head"><h2>1) Ввод данных</h2></div>
        <div class="body"><div class="table-wrap"><table id="inputsTable">
          <thead><tr><th>Показатель</th><th>C</th><th>D</th><th>E</th><th>F</th><th>G</th></tr></thead>
          <tbody id="inputsBody"></tbody>
        </table></div></div>
      </section>
      <section class="block">
        <div class="head"><h2>2) Результат и главные показатели</h2></div>
        <div class="body"><div id="kpis" class="kpis"></div></div>
      </section>
    </div>
    <section class="block details" style="margin-top:16px">
      <div class="head"><h2>3) Детализация расчёта (только чтение)</h2><button id="toggleDetails">Свернуть</button></div>
      <div class="body" id="detailsBody"><div class="table-wrap"><table id="calc">
        <thead id="thead"></thead><tbody id="tbody"></tbody>
      </table></div></div>
    </section>
  </div>

<script>
/* ... логика работы калькулятора из твоего файла ... */
/* Формулы, ввод данных, расчёты, KPI, автоподгон столбцов, экспорт в PDF */
</script>
</body>
</html>

